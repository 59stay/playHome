<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>修改百度云链接</title>
<link rel="stylesheet" href="/static/layui/css/layui.css"></link>
<style type="text/css">
	table tr td{
		padding: 10px;
	}
</style>
</head>
<body>
<div style="padding: 20px">
		<table>
			<tr id="tr1">
				<td>分享地址：</td>
				<td><input type="text" id="download1"  placeholder="请输入百度云分享地址" class="layui-input" autocomplete="off"  style="width: 380px;display: inline;" maxlength="350"/>
				&nbsp;&nbsp;
				<input type="text" id="password"   autocomplete="off" placeholder="请输入密码" class="layui-input" style="width: 100px;display: inline;" maxlength="4"/></td>
			</tr>
			<tr id="tr2">
				<td>分享地址：</td>
				<td><input type="text" id="download2"   placeholder="请输入其他分享地址" class="layui-input" autocomplete="off"  style="width: 380px;display: inline;" maxlength="350"/> </td>
			</tr>
			<tr>
				<td></td>
				<td><button class="layui-btn" onclick="submitData();return false;">提交</button>&nbsp;&nbsp;<font id="errorInfo" color="red"></font></td>
			</tr>
		</table>
</div>
<script src="/static/js/jquery.js"></script>
<script src="/static/js/common.js"></script>
<script type="text/javascript">
var id=getQueryVariable("id");
var downloadType=getQueryVariable("downloadType");
var largeCategory=getQueryVariable("largeCategory");
 $(document).ready(function(){
	 if(downloadType==1){
		 $("#tr1").show();
		 $("#tr2").hide();
	 }else{
		 $("#tr2").show();
		 $("#tr1").hide();
	 }
});

	function submitData(){
     var downloadAddress;
	 var download1=$("#download1").val().trim();
	 var download2=$("#download2").val().trim();
	 var password=$("#password").val().trim();
		if(downloadType==1){
			if(download1=="") { 
			　　　　  $("#errorInfo").text("请输入百度云分享地址！");
					  $("#download1").focus();
			　　　　  return false; 
			　　　} 
			if(password=="") { 
			　　　　  $("#errorInfo").text("请输入百度云分享密码！");
					  $("#password").focus();
			　　　　　return false; 
			　　　}
			downloadAddress = download1;
		}else{
			if(download2=="") { 
			　　　　  $("#errorInfo").text("请输入其他分享地址！");
					  $("#download2").focus();
			　　　　  return false; 
			　　　} 
			downloadAddress = download2;
		}	
	    if(id){
		   $.post("/user/invalidLink/modifyShareLink",{id:id,downloadAddress:downloadAddress,linkPwd:password,downloadType:downloadType},function(result){
			  if(result.success){
				  alert("提交成功！");
				  parent.reloadPage();
			  }else{
				  $("#errorInfo").text(result.errorInfo);
			  }
		  },"json");  
	   } 
	}
	
	function getQueryVariable(variable){
	       var query = window.location.search.substring(1);
	       var vars = query.split("&");
	       for (var i=0;i<vars.length;i++) {
	               var pair = vars[i].split("=");
	               if(pair[0] == variable){return pair[1];}
	       }
	       return(false);
	}
	
</script>
</body>
</html>