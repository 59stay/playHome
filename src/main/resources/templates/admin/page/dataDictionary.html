<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8"></meta>
<link rel="stylesheet" href="/static/layui/css/layui.css"></link>
<link rel="stylesheet" href="/static/css/css.css"></link>
<style type="text/css">
.layui-table-body{
     overflow:auto;
 }


.layui-table-tool-self{
display: none;
}


</style>
<script src="/static/layui/layui.js"></script>
<script src="/static/js/jquery.js"></script>
<script type="text/javascript">
/*<![CDATA[*/  
	layui.use(['element','form','table'], function(){
	      var form=layui.form;
		  var element = layui.element; //导航的hover效果、二级菜单等功能，需要依赖element模块
		  $ = layui.jquery; // 使用jquery
		  var table = layui.table;
		  table.render({
		     elem: '#dataDictionaryTable'
		    ,url:'/admin/dataDictionary/listPage'
		    ,limits:[10,20,30]
		    ,toolbar: '#toolbar'
		    ,cols: [[
		       {type:'radio'}
			  ,{type:'numbers',width:40}
			  ,{field:'dictionaryType', title: '大类别名称',align:'center',templet:formatDictionaryType}
			  ,{field:'dictionaryName', title: '类别名称',align:'center'}
		      ,{field:'dictionarySort', title: '排序',align:'center',sort: true}
		      ,{field:'action', width:180, title: '操作',align:'center',templet:formatAction}
		    ]]
		    ,page: true
		  });
		  
		  table.on('toolbar(dataDictionaryTable)', function(obj){
			    switch(obj.event){
			      case 'add':
			        	layer.open({
				            type:2,
				            title:"添加资源类别",
				            area: ['22%','42%'],
				            content: '/admin/saveDataDictionary.html'
			        	});
			      break;
			    }
		});
		
		  
		  
	});

	function formatDictionaryType(d){
		if(d.dictionaryType=="A"){
			return "宅游戏";
		}else if(d.dictionaryType=="B"){
			return "宅电影";
		}else if(d.dictionaryType=="C"){
			return "宅软件";
		}else{
			return "";
		}
		
	}
	
	
	function formatAction(d){
		return "<button class='layui-btn layui-btn-normal layui-btn-xs' onclick='modify("+d.id+")'><i class='layui-icon layui-icon-edit'></i>编辑</button><button class='layui-btn layui-btn-warm layui-btn-xs' onclick='del("+d.id+")'><i class='layui-icon layui-icon-delete' ></i>删除</button>";
	}

	
	function modify(id){
		layer.open({
			  type: 2,
			  title: '编辑资源类别',
			  area: ['22%','42%'],
			  content: '/admin/saveDataDictionary.html?id='+id //iframe的url
			});
	}
	
	
	function del(id){
		layer.confirm('您确定要删除这条记录吗？', {
	    title:"系统提示"
		  ,btn: ['确定','取消'] //按钮
		}, function(){
			layer.closeAll('dialog');
			$.post("/admin/dataDictionary/delete",{"id":id},function(result){
				if(result.success){
					layer.msg("删除成功！");
					location.reload();
				}else{
					layer.msg("删除失败，请联系管理员！");
				}
			},"json");
		}, function(){
		  
		});
	}
	
/*]]>*/
</script>

<script type="text/html" id="toolbar">
  <div class="layui-btn-container">
    <button class="layui-btn layui-btn-sm" lay-event="add">添加类别</button>
  </div>
</script>

</head>

<body>
  
<div style="margin: 10px 10px 0px 20px;">
 <table  id="dataDictionaryTable" lay-filter="dataDictionaryTable"></table>
</div>



</body>
</html>